import{d as c,u as g,V as b,f as E,j as r,M as i,G as h,B as f}from"./app-Dw7o5vkh.js";import{a as m,u as N}from"./utils-BPGF-aAi.js";import{u as P,z as k,I as V,b as v}from"./validators-wrJi8O3P.js";import{F as y}from"./Form-BlxxzsZ_.js";import{A as C,T as S}from"./TextInput-BmGjE_yf.js";import{S as p}from"./Title-BT814kwl.js";import{T as A}from"./Textarea-B-BpNl9b.js";async function K(){const{data:e}=await m.get("/brands/list");return e}async function L(e){const{data:a}=await m.delete(`/brands/${e.id}`);return a}async function T(e){const{data:a}=await m.post("/brands",e);return a}async function w(e){const{data:a}=await m.put(`/brands/${e.id}`,e);return a}const U=({data:e,onCreatedId:a,...t})=>{const d=c.useMemo(()=>!!e,[e]),n=P({mode:"uncontrolled",validate:k(v)});c.useEffect(()=>{e&&n.setValues(e)},[e]);const u=g(),{mutate:B,isPending:M,error:s}=N({mutationFn:w,onSuccess:()=>{u.refetchQueries({queryKey:["brands"]}),n.reset(),t.onClose()},onError:o=>{b.error((o==null?void 0:o.message)||"Gagal mengupdate merek")}}),{mutate:x,isPending:j,error:l}=N({mutationFn:T,onSuccess:o=>{u.refetchQueries({queryKey:["brands"]}),a&&(E.reload({only:["brandList"]}),a(o.data.id)),n.reset(),t.onClose()},onError:o=>{b.error((o==null?void 0:o.message)||"Gagal menambah merek")}}),D=o=>{d?B({id:e==null?void 0:e.id,...o}):x(o)};return r.jsxDEV(i.Root,{...t,onClose:()=>{t.onClose(),n.reset()},children:[r.jsxDEV(i.Overlay,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:85,columnNumber:7},void 0),r.jsxDEV(i.Content,{radius:"lg",children:[r.jsxDEV(i.Header,{className:"border-b border-gray-300",children:[r.jsxDEV(i.Title,{children:d?"Edit Merek":"Tambah Merek"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:88,columnNumber:11},void 0),r.jsxDEV(i.CloseButton,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:87,columnNumber:9},void 0),r.jsxDEV(y,{onSubmit:n.onSubmit(D),children:[r.jsxDEV(i.Body,{py:"lg",children:[(s||l)&&r.jsxDEV(C,{color:"red",c:"red",icon:r.jsxDEV(V,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:95,columnNumber:50},void 0),mb:"md",children:(s==null?void 0:s.message)||(l==null?void 0:l.message)||"Gagal mengupdate merek"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:95,columnNumber:15},void 0),r.jsxDEV(p,{gap:"md",children:[r.jsxDEV(S,{placeholder:"Masukkan nama merek",label:"Nama Merek",withAsterisk:!0,"data-autofocus":!0,...n.getInputProps("name")},n.key("name"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:101,columnNumber:15},void 0),r.jsxDEV(A,{placeholder:"Masukkan deskripsi merek",label:"Deskripsi Merek",rows:3,...n.getInputProps("description")},n.key("description"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:109,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:100,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:93,columnNumber:11},void 0),r.jsxDEV(p,{component:"footer",gap:"md",p:"md",className:"border-t border-gray-300",children:r.jsxDEV(h,{justify:"end",children:[r.jsxDEV(f,{variant:"outline",onClick:()=>{t.onClose(),n.reset()},children:"Batal"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:120,columnNumber:15},void 0),r.jsxDEV(f,{type:"submit",loading:M||j,children:d?"Update":"Tambah"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:129,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:119,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:86,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/BrandModal.tsx",lineNumber:78,columnNumber:5},void 0)};export{U as B,L as d,K as g};
