import{d as c,u as T,V as p,f as g,j as o,M as r,G as B,B as f}from"./app-DRChOLyS.js";import{a as m,u as b}from"./utils-BzyQMKcG.js";import{u as E,I as h,z as P,i as V}from"./validators-DVmJ9Wut.js";import{F as v}from"./Form-Be3on0Th.js";import{A as k,T as C}from"./TextInput-qBzfsNLo.js";import{S as N}from"./Title-DVbCuHvN.js";import{T as S}from"./Textarea-BICgDL0R.js";async function K(){const{data:e}=await m.get("/types/list");return e}async function L(e){const{data:t}=await m.delete(`/types/${e.id}`);return t}async function A(e){const{data:t}=await m.post("/types",e);return t}async function w(e){const{data:t}=await m.put(`/types/${e.id}`,e);return t}const U=({data:e,onCreatedId:t,...a})=>{const d=c.useMemo(()=>!!e,[e]),n=E({mode:"uncontrolled",validate:P(V)});c.useEffect(()=>{e&&n.setValues(e)},[e]);const u=T(),{mutate:y,isPending:M,error:s}=b({mutationFn:w,onSuccess:()=>{u.refetchQueries({queryKey:["types"]}),n.reset(),a.onClose()},onError:i=>{p.error((i==null?void 0:i.message)||"Gagal mengupdate tipe")}}),{mutate:x,isPending:j,error:l}=b({mutationFn:A,onSuccess:i=>{u.refetchQueries({queryKey:["types"]}),t&&(g.reload({only:["typeList"]}),t(i.id)),n.reset(),a.onClose()},onError:i=>{p.error((i==null?void 0:i.message)||"Gagal menambah tipe")}}),D=i=>{d?y({id:e==null?void 0:e.id,...i}):x(i)};return o.jsxDEV(r.Root,{...a,onClose:()=>{a.onClose(),n.reset()},children:[o.jsxDEV(r.Overlay,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:85,columnNumber:7},void 0),o.jsxDEV(r.Content,{radius:"lg",children:[o.jsxDEV(r.Header,{className:"border-b border-gray-300",children:[o.jsxDEV(r.Title,{children:d?"Edit Tipe":"Tambah Tipe"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:88,columnNumber:11},void 0),o.jsxDEV(r.CloseButton,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:87,columnNumber:9},void 0),o.jsxDEV(v,{onSubmit:n.onSubmit(D),children:[o.jsxDEV(r.Body,{py:"lg",children:[(s||l)&&o.jsxDEV(k,{color:"red",c:"red",icon:o.jsxDEV(h,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:95,columnNumber:50},void 0),mb:"md",children:(s==null?void 0:s.message)||(l==null?void 0:l.message)||"Gagal mengupdate tipe"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:95,columnNumber:15},void 0),o.jsxDEV(N,{gap:"md",children:[o.jsxDEV(C,{placeholder:"Masukkan nama tipe",label:"Nama Tipe",withAsterisk:!0,"data-autofocus":!0,...n.getInputProps("name")},n.key("name"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:101,columnNumber:15},void 0),o.jsxDEV(S,{placeholder:"Masukkan deskripsi tipe",label:"Deskripsi Tipe",rows:3,...n.getInputProps("description")},n.key("description"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:109,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:100,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:93,columnNumber:11},void 0),o.jsxDEV(N,{component:"footer",gap:"md",p:"md",className:"border-t border-gray-300",children:o.jsxDEV(B,{justify:"end",children:[o.jsxDEV(f,{variant:"outline",onClick:()=>{a.onClose(),n.reset()},children:"Batal"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:120,columnNumber:15},void 0),o.jsxDEV(f,{type:"submit",loading:M||j,children:d?"Update":"Tambah"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:129,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:119,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:86,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/TypeModal.tsx",lineNumber:78,columnNumber:5},void 0)};export{U as T,L as d,K as g};
