import{q as P,d as m,D as E,u as K,j as e,a as A,L as F,B as d,H as L,G as C,J as T,r as j,V as R}from"./app-CsfJiPAg.js";import{u as z}from"./useQuery-CivF-W0P.js";import{u as G,f as q}from"./utils-DTxDwtwe.js";import{p as U,l as J,F as O,A as Q}from"./AdminLayout-aHbIS04J.js";import{u as Y,g as H}from"./staff_api-Dr0kiH9D.js";import{S as u}from"./SectionHeader-BnsUQOTq.js";import{P as _}from"./PageTitle-BQ63YMTJ.js";import{P as $}from"./PageTransition-pWmh_Ckg.js";import{u as W,I as X,z as Z,f as ee}from"./validators-Cc5AS_Iv.js";import ae from"./not_found-CV1GlSVs.js";import{S as ie}from"./status-codes-B_I7eCRx.js";import{L as te}from"./LoadingOverlay-mFnWD4Gw.js";import{S as o,a as h,C as c}from"./Title-tHG7-3SR.js";import{F as re}from"./Form-DvdKhdsd.js";import{G as g}from"./Grid-BwWjE6_-.js";import{A as ne,T as b}from"./TextInput-BSrrIIRU.js";import{S as oe}from"./SimpleGrid-DEOOUVqu.js";import{D as se}from"./DatePickerInput-DVZY_bk_.js";import{S}from"./Select-CxzNu1PS.js";import{A as le}from"./arrow-left-DScie-4S.js";import{P as M}from"./PasswordInput-CiBjFsPR.js";import{A as k,I as B}from"./Image-DSSokqw9.js";import{F as fe}from"./FileButton-DyzLEDw_.js";import"./pick-calendar-levels-props-C4Pob9S0.js";import"./CheckIcon-DNFR220-.js";const me=()=>{const{id:l}=P().props,t=P().props,i=W({mode:"uncontrolled",validate:Z(ee)}),{data:r,isPending:N,error:f}=z({queryKey:["staff-detail",{id:l}],queryFn:()=>H({id:Number(l)}),enabled:!!l,select:a=>a.data});m.useEffect(()=>{var a;r&&(i.setValues({fullName:r.fullName,email:r.email,phone:U(r.phone),joinDate:E.fromISO(r.joinDate).toJSDate(),roles:(a=r.roleIds[0])==null?void 0:a.toString(),image:null}),r.image&&D(r.image))},[r,t==null?void 0:t.roleList]);const p=K(),{mutate:y,isPending:V,error:s}=G({mutationFn:Y,onSuccess:()=>{R.success("Karyawan berhasil diubah"),p.refetchQueries({queryKey:["staffs"]}),p.refetchQueries({queryKey:["staff-detail",{id:t==null?void 0:t.id}],exact:!0}),i.reset(),i.setErrors({})},onError:a=>{i.setErrors(q(a==null?void 0:a.errors))}}),v=a=>{y({...a,password:a.password||void 0,id:t==null?void 0:t.id,joinDate:E.fromJSDate(new Date(a.joinDate)).toISODate({format:"extended"}),roles:[a.roles]})},[x,D]=m.useState(null),w=a=>{if(a){const n=new FileReader;n.onload=()=>{D(n.result)},n.readAsDataURL(a),i.getInputProps("image").onChange(a)}},I=m.useMemo(()=>{var a;return J.isEmpty(t==null?void 0:t.roleList)?[]:(a=t==null?void 0:t.roleList)==null?void 0:a.map(n=>({label:n.name,value:n.id.toString()}))},[t==null?void 0:t.roleList]);return(f==null?void 0:f.code)==ie.NOT_FOUND?e.jsxDEV(ae,{h:"calc(100vh - 300px)",message:"Karyawan tidak ditemukan"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:130,columnNumber:12},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(A,{title:"Ubah Karyawan"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:135,columnNumber:7},void 0),e.jsxDEV(te,{visible:N,className:"z-50",loaderProps:{children:e.jsxDEV(o,{align:"center",gap:"sm",children:[e.jsxDEV(F,{size:42},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:142,columnNumber:15},void 0),e.jsxDEV(h,{size:"sm",children:"Memuat data karyawan..."},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:143,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:141,columnNumber:13},void 0)}},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:136,columnNumber:7},void 0),e.jsxDEV($,{children:e.jsxDEV(re,{form:i,onSubmit:v,children:[e.jsxDEV(_,{title:"Ubah Karyawan",description:"Merupakan halaman untuk mengubah karyawan ke dalam sistem.",children:e.jsxDEV(d,{type:"submit",loading:N||V,children:"Simpan"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:155,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:151,columnNumber:11},void 0),e.jsxDEV(g,{gutter:"lg",children:[e.jsxDEV(g.Col,{span:{base:12,md:9},order:{base:2,md:1},children:e.jsxDEV(o,{gap:"lg",children:[e.jsxDEV(c,{shadow:"xs",children:[e.jsxDEV(u,{title:"Informasi Produk",description:"Berisi tentang informasi produk yang akan diunggah."},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:164,columnNumber:19},void 0),e.jsxDEV(o,{children:[(s==null?void 0:s.message)&&e.jsxDEV(ne,{color:"red",c:"red",icon:e.jsxDEV(X,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:171,columnNumber:58},void 0),children:s==null?void 0:s.message},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:171,columnNumber:23},void 0),e.jsxDEV(oe,{cols:{base:1,md:2},spacing:"lg",children:[e.jsxDEV(b,{placeholder:"Masukkan nama lengkap",label:"Nama Lengkap",withAsterisk:!0,autoFocus:!0,...i.getInputProps("fullName")},i.key("fullName"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:177,columnNumber:23},void 0),e.jsxDEV(b,{placeholder:"Masukkan alamat email",label:"Alamat Email",withAsterisk:!0,...i.getInputProps("email")},i.key("email"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:185,columnNumber:23},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:176,columnNumber:21},void 0),e.jsxDEV(b,{placeholder:"Masukkan nomor telepon",label:"Nomor Telepon",withAsterisk:!0,maxLength:15,onKeyDown:a=>{!new RegExp("^[0-9]*$").test(a.key)&&a.key!=="Backspace"&&a.key!=="Enter"&&a.key!=="Tab"&&!(a.ctrlKey&&a.key==="a")&&!(a.ctrlKey&&a.key==="c")&&!(a.ctrlKey&&a.key==="v")&&a.preventDefault()},type:"number",inputMode:"numeric",...i.getInputProps("phone")},i.key("phone"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:193,columnNumber:21},void 0),e.jsxDEV(se,{label:"Tanggal Bergabung",placeholder:"Pilih tanggal bergabung",withAsterisk:!0,valueFormat:"DD MMMM YYYY",...i.getInputProps("joinDate")},i.key("joinDate"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:218,columnNumber:21},void 0),e.jsxDEV(L,{data:"roleList",fallback:e.jsxDEV(S,{disabled:!0,label:"Peran Karyawan"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:228,columnNumber:33},void 0),children:e.jsxDEV(S,{data:I,label:"Peran Karyawan",placeholder:"Pilih peran karyawan",withAsterisk:!0,searchable:!0,clearable:!0,...i.getInputProps("roles"),onChange:a=>{i.getInputProps("roles").onChange(a)}},i.key("roles"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:230,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:226,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:169,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:163,columnNumber:17},void 0),e.jsxDEV(C,{children:e.jsxDEV(d,{component:T,href:"/kelola-karyawan",color:"gray.4",c:"gray",variant:"outline",prefetch:!0,leftSection:e.jsxDEV(le,{size:16},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:255,columnNumber:34},void 0),children:"Kembali"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:248,columnNumber:19},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:247,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:162,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:161,columnNumber:13},void 0),e.jsxDEV(g.Col,{span:{base:12,md:3},order:{base:1,md:2},children:e.jsxDEV(o,{gap:"lg",children:[e.jsxDEV(c,{shadow:"xs",children:[e.jsxDEV(u,{title:"Reset Kata Sandi",description:"Reset kata sandi karyawan ke default."},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:265,columnNumber:19},void 0),e.jsxDEV(o,{gap:"sm",children:[e.jsxDEV(M,{placeholder:"Masukkan kata sandi",label:"Kata Sandi",withAsterisk:!0,autoComplete:"off",...i.getInputProps("password")},i.key("password"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:270,columnNumber:21},void 0),e.jsxDEV(M,{placeholder:"Konfirmasi kata sandi",label:"Konfirmasi Kata Sandi",withAsterisk:!0,autoComplete:"off",...i.getInputProps("confirmPassword")},i.key("confirmPassword"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:278,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:269,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:264,columnNumber:17},void 0),e.jsxDEV(c,{shadow:"xs",children:[e.jsxDEV(u,{title:"Foto Karyawan",description:"Berisi tentang foto karyawan yang akan diunggah."},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:289,columnNumber:19},void 0),e.jsxDEV(o,{gap:"sm",children:e.jsxDEV(O,{direction:{base:"column",xs:"row",md:"column"},align:{base:"start",xs:"center",md:"start"},gap:"lg",children:[x?e.jsxDEV(k,{ratio:1,w:{base:"100%",xs:j(300),lg:"100%"},children:e.jsxDEV(B,{src:x,alt:i.values.name,fit:"cover",fallbackSrc:"https://images.placeholders.dev/?width=400&height=400&text=image",radius:"lg"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:305,columnNumber:27},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:304,columnNumber:25},void 0):e.jsxDEV(k,{ratio:1,w:{base:"100%",xs:j(300),lg:"100%"},children:e.jsxDEV(B,{src:"https://images.placeholders.dev/?width=400&height=400&text=image",alt:i.values.name,fit:"cover",radius:"lg"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:315,columnNumber:27},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:314,columnNumber:25},void 0),e.jsxDEV(o,{gap:"xs",children:[e.jsxDEV(fe,{name:"image",accept:"image/*",...i.getInputProps("image"),onChange:w,children:a=>e.jsxDEV(d,{...a,w:"fit-content",size:"sm",children:"Unggah foto"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:333,columnNumber:29},void 0)},i.key("image"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:325,columnNumber:25},void 0),e.jsxDEV(h,{fz:"xs",c:"gray.6",children:"Format: JPG, PNG, maksimal 2MB"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:338,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:324,columnNumber:23},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:294,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:293,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:288,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:263,columnNumber:15},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:262,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:160,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:150,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:149,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:134,columnNumber:5},void 0)};me.layout=l=>e.jsxDEV(Q,{children:l},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/pages/staffs/EditStaffPage.tsx",lineNumber:354,columnNumber:51},void 0);export{me as default};
