import{d as c,u as D,V as f,f as C,j as o,M as a,G as B,B as g}from"./app-wHcAaFvM.js";import{a as m,u as b}from"./utils-R8C2eLnL.js";import{u as E,z as h,I as P,c as V}from"./validators-BCjQ9g7n.js";import{F as v}from"./Form-BzS_F88k.js";import{A as k,T as S}from"./TextInput-Dz9QFHVX.js";import{S as N}from"./Title-C18PzRI1.js";import{T as A}from"./Textarea-Dk2XprJw.js";async function z(){const{data:e}=await m.get("/categories/list");return e}async function L(e){const{data:i}=await m.delete(`/categories/${e.id}`);return i}async function T(e){const{data:i}=await m.post("/categories",e);return i}async function w(e){const{data:i}=await m.put(`/categories/${e.id}`,e);return i}const U=({data:e,onCreatedId:i,...n})=>{const d=c.useMemo(()=>!!e,[e]),t=E({mode:"uncontrolled",validate:h(V)});c.useEffect(()=>{e&&t.setValues(e)},[e]);const u=D(),{mutate:p,isPending:y,error:s}=b({mutationFn:w,onSuccess:()=>{u.refetchQueries({queryKey:["categories"]}),t.reset(),n.onClose()},onError:r=>{f.error((r==null?void 0:r.message)||"Gagal mengupdate kategori")}}),{mutate:M,isPending:x,error:l}=b({mutationFn:T,onSuccess:r=>{u.refetchQueries({queryKey:["categories"]}),i&&(C.reload({only:["categoryList"]}),i(r.id)),t.reset(),n.onClose()},onError:r=>{f.error((r==null?void 0:r.message)||"Gagal menambah kategori")}}),j=r=>{d?p({id:e==null?void 0:e.id,...r}):M(r)};return o.jsxDEV(a.Root,{...n,onClose:()=>{n.onClose(),t.reset()},children:[o.jsxDEV(a.Overlay,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:85,columnNumber:7},void 0),o.jsxDEV(a.Content,{radius:"lg",children:[o.jsxDEV(a.Header,{className:"border-b border-gray-300",children:[o.jsxDEV(a.Title,{children:d?"Edit Kategori":"Tambah Kategori"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:88,columnNumber:11},void 0),o.jsxDEV(a.CloseButton,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:89,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:87,columnNumber:9},void 0),o.jsxDEV(v,{onSubmit:t.onSubmit(j),children:[o.jsxDEV(a.Body,{py:"lg",children:[(s||l)&&o.jsxDEV(k,{color:"red",c:"red",icon:o.jsxDEV(P,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:95,columnNumber:50},void 0),mb:"md",children:(s==null?void 0:s.message)||(l==null?void 0:l.message)||"Gagal mengupdate kategori"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:95,columnNumber:15},void 0),o.jsxDEV(N,{gap:"md",children:[o.jsxDEV(S,{placeholder:"Masukkan nama kategori",label:"Nama Kategori",withAsterisk:!0,"data-autofocus":!0,...t.getInputProps("name")},t.key("name"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:101,columnNumber:15},void 0),o.jsxDEV(A,{placeholder:"Masukkan deskripsi kategori",label:"Deskripsi Kategori",rows:3,...t.getInputProps("description")},t.key("description"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:109,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:100,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:93,columnNumber:11},void 0),o.jsxDEV(N,{component:"footer",gap:"md",p:"md",className:"border-t border-gray-300",children:o.jsxDEV(B,{justify:"end",children:[o.jsxDEV(g,{variant:"outline",onClick:()=>{n.onClose(),t.reset()},children:"Batal"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:120,columnNumber:15},void 0),o.jsxDEV(g,{type:"submit",loading:y||x,children:d?"Update":"Tambah"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:129,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:119,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:92,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:86,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/CategoryModal.tsx",lineNumber:78,columnNumber:5},void 0)};export{U as C,L as d,z as g};
