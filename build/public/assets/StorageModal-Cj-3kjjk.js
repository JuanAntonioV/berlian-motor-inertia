import{d as f,u as y,V as M,f as C,j as e,M as i,r as m,B as b,G as F}from"./app-CsfJiPAg.js";import{u as j}from"./utils-DTxDwtwe.js";import{u as I,c as R}from"./storage_api-B2KrBUEE.js";import{u as w,z as A,I as T,h as G}from"./validators-Cc5AS_Iv.js";import{F as z}from"./Form-CJvRVwyL.js";import{A as U,T as q}from"./TextInput-BSrrIIRU.js";import{S as d,a as D}from"./Title-tHG7-3SR.js";import{F as Q}from"./AdminLayout-aHbIS04J.js";import{A as h,I as S}from"./Image-DSSokqw9.js";import{F as K}from"./FileButton-DyzLEDw_.js";import{T as L}from"./Textarea-BR9ZfWql.js";const re=({data:a,onCreatedId:g,...t})=>{const u=f.useMemo(()=>!!a,[a]),r=w({mode:"uncontrolled",validate:A(G)});f.useEffect(()=>{if(a){const{name:o,description:n,image:x}=a;r.setValues({name:o,description:n,image:null}),x&&c(x)}},[a]);const N=y(),{mutate:v,isPending:P,error:l}=j({mutationFn:I,onSuccess:()=>{N.refetchQueries({queryKey:["storages"]}),r.reset(),t.onClose()},onError:o=>{M.error((o==null?void 0:o.message)||"Gagal mengupdate rak")}}),{mutate:B,isPending:E,error:s}=j({mutationFn:R,onSuccess:o=>{N.refetchQueries({queryKey:["storages"]}),g&&(C.reload({only:["storageList"]}),g(o.id)),r.reset(),t.onClose()},onError:o=>{M.error((o==null?void 0:o.message)||"Gagal menambah rak")}}),V=o=>{u?v({id:a==null?void 0:a.id,...o}):B(o)},[p,c]=f.useState(null),k=o=>{if(o){const n=new FileReader;n.onload=()=>{c(n.result)},n.readAsDataURL(o),r.getInputProps("image").onChange(o)}};return e.jsxDEV(i.Root,{...t,onClose:()=>{t.onClose(),r.reset(),c(null)},children:[e.jsxDEV(i.Overlay,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:122,columnNumber:7},void 0),e.jsxDEV(i.Content,{radius:"lg",children:[e.jsxDEV(i.Header,{className:"border-b border-gray-300",children:[e.jsxDEV(i.Title,{children:u?"Edit Rak":"Tambah Rak"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:125,columnNumber:11},void 0),e.jsxDEV(i.CloseButton,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:126,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:124,columnNumber:9},void 0),e.jsxDEV(z,{onSubmit:r.onSubmit(V),children:[e.jsxDEV(i.Body,{py:"lg",children:[(l||s)&&e.jsxDEV(U,{color:"red",c:"red",icon:e.jsxDEV(T,{},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:132,columnNumber:50},void 0),mb:"md",children:(l==null?void 0:l.message)||(s==null?void 0:s.message)||"Gagal mengupdate rak"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:132,columnNumber:15},void 0),e.jsxDEV(d,{gap:"md",children:[e.jsxDEV(d,{gap:"sm",children:[e.jsxDEV(D,{fz:"sm",children:"Foto Rak"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:139,columnNumber:17},void 0),e.jsxDEV(Q,{align:"center",gap:"md",children:[p?e.jsxDEV(h,{ratio:1,w:m(120),h:m(120),children:e.jsxDEV(S,{src:p,alt:r.values.name,fit:"cover",fallbackSrc:"https://images.placeholders.dev/?width=400&height=400&text=image",radius:"lg"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:144,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:143,columnNumber:21},void 0):e.jsxDEV(h,{ratio:1,w:m(120),h:m(120),children:e.jsxDEV(S,{src:"https://images.placeholders.dev/?width=400&height=400&text=image",alt:r.values.name,fit:"cover",radius:"lg"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:154,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:153,columnNumber:21},void 0),e.jsxDEV(d,{gap:"xs",children:[e.jsxDEV(K,{name:"image",accept:"image/*",...r.getInputProps("image"),onChange:k,children:o=>e.jsxDEV(b,{...o,w:"fit-content",size:"xs",children:"Unggah foto"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:172,columnNumber:25},void 0)},r.key("image"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:164,columnNumber:21},void 0),e.jsxDEV(D,{fz:"xs",c:"gray.6",children:"Format: JPG, PNG, maksimal 2MB"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:177,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:163,columnNumber:19},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:141,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:138,columnNumber:15},void 0),e.jsxDEV(q,{placeholder:"Masukkan nama rak",label:"Nama Rak",withAsterisk:!0,"data-autofocus":!0,...r.getInputProps("name")},r.key("name"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:184,columnNumber:15},void 0),e.jsxDEV(L,{placeholder:"Masukkan deskripsi rak",label:"Deskripsi Rak",rows:3,...r.getInputProps("description")},r.key("description"),!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:192,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:137,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:130,columnNumber:11},void 0),e.jsxDEV(d,{component:"footer",gap:"md",p:"md",className:"border-t border-gray-300",children:e.jsxDEV(F,{justify:"end",children:[e.jsxDEV(b,{variant:"outline",onClick:()=>{t.onClose(),r.reset()},children:"Batal"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:203,columnNumber:15},void 0),e.jsxDEV(b,{type:"submit",loading:P||E,children:u?"Update":"Tambah"},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:212,columnNumber:15},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:202,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:201,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:123,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/Projects/Berlian Motor/berlian-motor-inertia/inertia/componets/modals/StorageModal.tsx",lineNumber:114,columnNumber:5},void 0)};export{re as S};
